"use strict";(self.webpackChunkwindfood_ver1=self.webpackChunkwindfood_ver1||[]).push([[279],{4279:(y,g,r)=>{r.r(g),r.d(g,{LoginRoutingModule:()=>b});var l=r(2480),t=r(2223),i=r(9401),u=r(3144),d=r(2340);let m=(()=>{class o{constructor(e){this.http=e,this.baseUrl=d.N.baseUrl+"api/persons"}loginUser(e){var n=new u.WM;return this.http.post(this.baseUrl+"/login",e,{headers:n,responseType:"json"})}getCurrentUser(){return this.http.get(this.baseUrl)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(u.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),c=(()=>{class o{constructor(e,n,a,v){this.fb=e,this.service=n,this.route=a,this.router=v}ngOnInit(){this.initForm(),localStorage.getItem("token")&&this.router.navigate(["dashboard"])}initForm(){this.form=this.fb.group({username:null,password:null})}onSubmit(){this.service.loginUser(this.form?.value).subscribe(e=>{localStorage.setItem("token",e),this.service.getCurrentUser().subscribe(n=>{console.log(n),0==n[0]?.role&&this.router.navigate(["dashboard"])})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.QS),t.Y36(m),t.Y36(l.gz),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:20,vars:1,consts:[[1,"gradient-custom"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"card","bg-dark","text-white",2,"border-radius","1rem"],[1,"card-body","p-5","text-center",3,"formGroup","ngSubmit"],[1,"mb-md-5","mt-md-4","pb-5"],[1,"fw-bold","mb-2","text-uppercase"],[1,"text-white-50","mb-5"],[1,"form-outline","form-white","mb-4"],["placeholder","Username","type","text","formControlName","username","id","typeEmailX",1,"form-control","form-control-lg"],["placeholder","Password","type","password","formControlName","password","id","typePasswordX",1,"form-control","form-control-lg"],[1,"small","mb-5","pb-lg-2"],["href","#!",1,"text-white-50"],["type","submit",1,"btn","btn-outline-light","btn-lg","px-5"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"div",6)(7,"h2",7),t._uU(8,"Login"),t.qZA(),t.TgZ(9,"p",8),t._uU(10,"Please enter your login and password!"),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"input",10),t.qZA(),t.TgZ(13,"div",9),t._UZ(14,"input",11),t.qZA(),t.TgZ(15,"p",12)(16,"a",13),t._uU(17,"Forgot password?"),t.qZA()(),t.TgZ(18,"button",14),t._uU(19,"Login"),t.qZA()()()()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",n.form))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".gradient-custom[_ngcontent-%COMP%]{background:#6a11cb;background:-webkit-linear-gradient(to right,#DE3163,rgb(37,117,252));height:100vh;background:linear-gradient(to right,#DE3163,rgb(37,117,252))}"]}),o})();var p=r(4755),h=r(229);const f=[{path:"",children:[{path:"",component:c}]}];let b=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[i.sg],imports:[l.Bz.forChild(f),p.ez,h.d,l.Bz]}),o})()}}]);